% Procedure for installation

\stepcounter{tableCounter} % Increment counter
\setcounter{rowCounter}{0} % Reset counter
\begin{tabularx}{\textwidth}{|>{\columncolor{tableColumnColor}}c|>{\columncolor{tableColumnColor}}c|X|}
  \hline
  \rowcolor{tableHeaderColor}
  ID & CK 1 & Description \\ \hline

  \procedureItem{
    If you are working with DACS1 and DACS2, one can go ahead with the procedure. The other DACS member can jump to point 1.12, 
    continuing the procedure from there
  }{}
  
  \procedureItem{
    Unpack material and place monitors on two tables in the following order (from left to right):
  \\
    Monitor 1, Monitor 2, Surveillance Monitor
  }

  \procedureItem{
    Connect 2 monitors, Monitor 1 and 2 to MC Laptop (HDMI cable).
  }

  \procedureItem{
    Connect the remaining monitor to the Windows PC (DP cable).
  }

  \procedureItem{
    Connect keyboards, mouses, power adapters to both PCs and connect Wifi Adapter to Surveillance PC.
  }

  \procedureItem{
    Plug in power of Ethernet switch.
  }

  \procedureItem{
    Plug in the circuit breaker (in the power strip) and press the reset button.
    The field under the reset button should now be colored red.
    If this is the case, place the housing on the circuit breaker and secure it with tape or a rubber band.
  }

  \procedureItem{
    Connect PRO Ethernet Switch to Mission Control Laptop with short Ethernet cable.
  }

  \procedureItem{
    Connect PRO Ethernet Switch to Windows PC with short Ethernet cable.
  }
  
  \procedureItem{
    Unroll the 100m cable from the Mission Control Room to the trailer.
    Be attentive not to damage the cable.
  }

  \procedureItem{If you are working with DACS1 and DACS2 you can jump to point 1.30 of the procedure}{}
  
  \procedureItem{
    Check that \underline{none} of the following cables are connected to the electrical cabinet (=P01+A01):
    \begin{itemize}
      \item 230VAC Power Supply (male blue SN 441011 type 12 plug, right side bottom)
      \item MOB Signal Cable (M12 5 pin connector, right side bottom)
      \item Ethernet Cable (RJ45 connector, right side bottom)
    \end{itemize}
  }

  \procedureItem{
    Check if all plugs on the right side of the electrical cabinet (=P01+A01) are present and all cables are connected according to the wiring map.
    \textit{Cables including HDC connector housings from X01 to X04 can be temporarily removed to provide a better overview of the P01 to P30 and T01 to T18. Reconnect after this step.}
  }

  \procedureItem{
    Open electrical cabinet (=P01+A01) with the DIN lock key.
  }

  \procedureItem{
    Check for loose wiring in the 230VAC connections (bottom right of =P01+A01). The wiring runs from the type 13 sockets to the terminals and the power supplies, with the colour code as follows.

    \begin{itemize}
      \item L: black, grey, or brown
      \item PE: yellow and green
      \item N: blue
    \end{itemize}
  }

  \procedureItem{
    Check the power supply on the bottom of the mounting plate for loose cables or breaks as well as the presence of the components.
    Components that must be present are:

    \begin{itemize}
      \item 24VDC Weidmüller power supply
      \item 12VDC Weidmüller power supply
      \item 5VDC Adjustable power supply
    \end{itemize}

    If cables are loose or not intact, they must be replaced and rewired according to the wiring map.
  }

  \procedureItem{
    Check the terminal blocks on the right side of the electrical cabinet (=P01+A01) for loose cables or breaks as well as the presence of the terminal blocks. The terminal blocks should be present in the following order from top to bottom.

    If cables are loose or not intact, they must be replaced and rewired according to the wiring map. The following terminal blocks should be present.

    \begin{itemize}
      \item Thermocouple T1-T10
      \item Thermocouple T11-T20
      \item Thermocouple T21-T30
      \item Static Pressure P1-P10
      \item Static Pressure P11-P20
      \item Sense Line S1-S15
      \item RTD T31-T40
      \item 24V Supply
      \item Loadcell L1-L6
      \item Mass Flow M1-M4
      \item Valve V1-V20
    \end{itemize}
  }

  \procedureItem{
    Check the wiring from the terminal blocks to the signal amplifiers for loose wires and bad insulation. The signal amplifiers can be identified by their labelling:

    \begin{itemize}
      \item “4-20mA to 2-10V Converter”
      \item “Filter-boards from thermocouples”
    \end{itemize}

    If cables are loose or not intact, they must be replaced and rewired according to the wiring map.
  }

  \procedureItem{
    Check the wiring from the terminal blocks and the signal amplifiers to the expansion boards (DB-37) and relays boards (RB12) for loose wires and bad insulation.
    If cables are loose or not intact, they must be replaced and rewired according to the wiring map.
  }

  \procedureItem{
    Check that:

    \begin{itemize}
      \item Labjack 1 is connected to Ethernet Switch 0 and expansion board 1
      \item Labjack 2 is connected to Ethernet Switch 0 and expansion board 2
      \item Labjack 3 is connected to Ethernet Switch 0 and expansion board 3
      \item Labjack 4 is connected to Ethernet Switch 0 and expansion board 4
      \item Labjack 5 is connected to Ethernet Switch 0 and expansion board 5
      \item Check that ethernet of the surveillance and the 100m cable roll are connected
    \end{itemize}
  }

  \procedureItem{
    Connect the MOB cable signal to the electrical cabinet (=P01+A01).
  }

  \procedureItem{
    Remove the cable protectors from the 100m Ethernet cable and keep them in a spot where you can find them again later.
  \\
    \hl{Be careful not to lose them!}
  }

  \procedureItem{
    Check that the Ethernet Cable (RJ45 connector, right side bottom) is connected to the Ethernet Switch 0.
  }
  
  \procedureItem{
    Connect the 100m ethernet cable to the ethernet switch in DACS Box.
  }

  \procedureItem{
    Connect the 230 VAC power supply of the electrical cabinet (=P01+A01) to the 100m cable roll.
  }

  \procedureItem{
    Check that the surveillance cameras are positioned on the trailer:
    \begin{itemize}
      \item 2 cameras on the FSS side
      \item 2 cameras on the OSS side
      \item 2 cameras on the shielding wall, on the engine side
    \end{itemize}
    For range surveillance, 1 camera will be mounted on the earth wall.
  }

  \procedureItem{
    Check inside the junction box on the OSS tower, that every power supply of the cameras is properly connected
  }

  \procedureItem{
    Make sure the Modem is connected via cable to the lan network of the trailer (Ethernet Switch 0).
  }

  \procedureItem{If you are working with DACS1 and DACS2 you can skip to point 1.35, else continue with the procedure}

  \procedureItem{
    Connect both PCs to the power strip an turn them on.
  \\
    Login credentials can be found on the DACS software page of the wiki
  \\
    \href
    {https://wiki.aris-space.ch/e/en/rocketry/engines/liquid/test-bench/data-acquisition-and-control-system/Subsystems/Software}
    {https://wiki.aris-space.ch/e/en/rocketry/engines/liquid/test-bench/data-acquisition-and-control-system/Subsystems/Software}
  }

  \procedureItem{
    Connect mission control PC to internet.
  }

  \procedureItem{Check HEPHAESTUS config}

  \procedureItem{Open a Terminal on the MC Laptop}{}

  \procedureItem{
    Open Grafana on the MC Laptop:
    \begin{itemize}
      \item Open a Webbrowser 
      \item Type \textbf{Localhost:3000} in the search bar 
      \item Choose the dashboard that you need for your test
    \end{itemize}
  }{}

  \procedureItem{
    Connect the MOB cable signal to the MOB box
  }

  \procedureItem{If one of the two DACS members has not finished their procedure steps, wait until both are at this point}

  \procedureItem{
    Ask TC to confirm that it's ok to connect the power cable for the trailer.
  \\
    Once confirmed, connect it with the circuit breaker.
  }

  \procedureItem{
    Check that there's a connection to the trailer.
  \\
    The LED on the switch should light up.
  \\
    If it does not, check the cables at every connector.
  }

  \procedureItem{
    A green light should turn on for:

    \begin{itemize}
      \item 24 VDC Power Supply
      \item 12 VDC Power Supply
      \item 5 VDC Power Supply?
      \item Labjack 1
      \item Labjack 2
      \item Labjack 3
      \item Labjack 4
      \item Labjack 5
      \item RB12 Board 0 (relay board 0)
      \item RB12 Board 1 (relay board 1)
      \item CB37 Board X1 (expansion board 1)
      \item CB37 Board X2 (expansion board 2)
      \item CB37 Board X3 (expansion board 3)
      \item CB37 Board X4 (expansion board 4)
      \item CB37 Board X5 (expansion board 5)
    \end{itemize}

    If there’s a light not turning on it means it’s not powered. Control that the connectors are properly attached and connected
  }

  \procedureItem{
    Connect 100m Ethernet cable to the PRO Ethernet Switch.
  }

  \procedureItem{
    Connect the ethernet cable to the electrical cabinet (=P01+A01), if not already done.
  }

  \procedureItem{
    Start the UI on the MC Laptop:
    \begin{itemize}
      \item If you made any changes in the code use \texttt{bash bild\_and\_run.sh} to start the UI
      \item If you made no changes in the code use \texttt{bash run.sh} to start the UI
    \end{itemize}
  }{}

  \procedureItem{
    The software responsible should check that the ethernet is connected to mission control room computer.
    If the Labjack is connected to the ethernet the green light should start blinking on the Labjack.
  }

  \procedureItem{
    Check if loadcell transmitter are tared.If not tare them.
    Press tare on the Loadcell PCB in the DACS box.
  }

  \procedureItem{
    Close the electrical cabinet (=P01+A01) with the DIN lock key.
  }

  \procedureItem{
    Confirm that you get valid data read outs from the trailer.
  }

  \procedureItem{
    After Mission Control Station is installed as in start surveillance website via the shortcut in the bottom task bar
  }

  \procedureItem{
    Login via the button (no password needed, username = admin)
  }

  \procedureItem{
    Check that cameras see all points of interest (valves, displays, etc.)
  }

  \procedureItem{
    Confirm that you get a live camera feed.
  }

  \procedureItem{
    To record the video Press Windows-G and then Record
  }

  \procedureItem{
    Good luck on your firing $<$3
  }
\end{tabularx}
